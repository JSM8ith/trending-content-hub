<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auto-Trending Content Hub</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Sora:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: 'Sora', sans-serif;
        }
        #root {
            width: 100%;
            min-height: 100vh;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // Lucide React icons as inline SVG components
        const TrendingUp = ({ className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}><polyline points="22 7 13.5 15.5 8.5 10.5 2 17"/><polyline points="16 7 22 7 22 13"/></svg>
        );

        const Flame = ({ className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg>
        );

        const RefreshCw = ({ className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}><path d="M21 2v6h-6"/><path d="M3 12a9 9 0 0 1 15-6.7L21 8"/><path d="M3 22v-6h6"/><path d="M21 12a9 9 0 0 1-15 6.7L3 16"/></svg>
        );

        const Clock = ({ className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
        );

        const Eye = ({ className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}><path d="M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z"/><circle cx="12" cy="12" r="3"/></svg>
        );

        const MessageCircle = ({ className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/></svg>
        );

        const Star = ({ className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}><polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"/></svg>
        );

        const Zap = ({ className, ...props }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className} {...props}><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
        );

        function AutoTrendingDashboard() {
            const [loading, setLoading] = useState(false);
            const [content, setContent] = useState(null);
            const [selectedCategory, setSelectedCategory] = useState('all');
            const [autoRefresh, setAutoRefresh] = useState(false);
            const [lastUpdated, setLastUpdated] = useState(null);
            const [error, setError] = useState('');

            const categories = [
                { id: 'all', name: 'All Categories', icon: 'ðŸŒŸ' },
                { id: 'entertainment', name: 'Entertainment', icon: 'ðŸŽ­' },
                { id: 'celebrity', name: 'Celebrity News', icon: 'â­' },
                { id: 'tech', name: 'Tech/Streaming', icon: 'ðŸ“±' },
                { id: 'movies', name: 'Movies & TV', icon: 'ðŸŽ¬' },
                { id: 'sports', name: 'Sports', icon: 'âš½' },
                { id: 'gaming', name: 'Video Games', icon: 'ðŸŽ®' }
            ];

            const fetchTrendingContent = async (category = 'all') => {
                setLoading(true);
                setError('');

                try {
                    const categoryFilter = category === 'all' 
                        ? 'Entertainment, Celebrity News, Technology/Streaming (Netflix, YouTube, etc.), Movies & TV, Sports, Video Games'
                        : categories.find(c => c.id === category)?.name;

                    const prompt = `You are an elite AI content aggregator analyzing trending content across social media and news platforms.

TASK: Find and analyze the TOP 12-15 trending stories RIGHT NOW in these categories:
${categoryFilter}

FOCUS AREAS:
- **Entertainment**: Award shows, celebrity events, entertainment industry news
- **Celebrity News**: Celebrity gossip, relationships, controversies, viral moments
- **Tech/Streaming**: Netflix releases, YouTube trends, streaming wars, tech product launches, platform updates
- **Movies & TV**: New releases, trailers, casting news, reviews, box office, streaming debuts
- **Sports**: Game highlights, player news, trades, viral sports moments, athlete social media
- **Video Games**: New game releases, gaming industry news, esports, streamer drama, gaming controversies

For EACH trending story, provide:

1. **Story Title** - Clear, engaging summary
2. **Creative Headline** (70-85 characters) - Teaser that hooks WITHOUT giving everything away
3. **Category** - Which category it belongs to
4. **Source Platform** - Where it's trending (Twitter, Reddit, Instagram, TikTok, YouTube, News Sites)
5. **Viral Quote/Moment** - The exact quote, clip description, or moment driving engagement
6. **Engagement Level** - Extreme/Very High/High/Moderate
7. **Engagement Details** - Estimated metrics (views, likes, shares, comments)
8. **Viral Score** (1-10) - Based on shareability, controversy, celebrity factor
9. **Sentiment** - Positive/Negative/Controversial/Neutral
10. **Unique Angle** - What makes this story different or special
11. **Story Ideas** (2-3) - Angles to develop this into fuller content
12. **Keywords** (3-5) - Trending hashtags and search terms
13. **Time Posted** - How recent (e.g., "2 hours ago")
14. **Why Trending** - Brief explanation of the buzz

Return ONLY valid JSON (no markdown, no backticks):

{
  "generatedAt": "${new Date().toISOString()}",
  "category": "${categoryFilter}",
  "trending": [
    {
      "id": 1,
      "title": "Story title here",
      "creativeHeadline": "Teaser headline (70-85 chars)",
      "category": "Entertainment/Celebrity/Tech/Movies/Sports/Gaming",
      "sourcePlatform": "Twitter",
      "viralQuote": "The exact quote or moment",
      "engagement": "Very High",
      "engagementDetails": "2.3M views, 450K likes, 89K shares",
      "viralScore": 9,
      "sentiment": "Controversial",
      "uniqueAngle": "What makes this special",
      "storyIdeas": [
        "Development angle 1",
        "Development angle 2",
        "Development angle 3"
      ],
      "keywords": ["keyword1", "keyword2", "keyword3"],
      "timePosted": "3 hours ago",
      "whyTrending": "Why this is blowing up"
    }
  ],
  "insights": {
    "topTrend": "The #1 story overall",
    "emergingStories": "2-3 stories with rapid growth",
    "controversies": "Major debates happening",
    "mustCover": "Stories to cover immediately",
    "platformBreakdown": {
      "twitter": 5,
      "reddit": 3,
      "tiktok": 4,
      "youtube": 2,
      "news": 1
    }
  }
}`;

                    const response = await fetch('https://api.anthropic.com/v1/messages', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json',
                        },
                        body: JSON.stringify({
                            model: 'claude-sonnet-4-20250514',
                            max_tokens: 8000,
                            tools: [
                                {
                                    type: "web_search_20250305",
                                    name: "web_search"
                                }
                            ],
                            messages: [{ role: 'user', content: prompt }]
                        })
                    });

                    if (!response.ok) {
                        throw new Error(`API Error: ${response.status}`);
                    }

                    const data = await response.json();
                    let contentText = data.content.find(block => block.type === 'text')?.text || '';
                    
                    contentText = contentText.replace(/```json\\n?/g, '').replace(/```\\n?/g, '').trim();
                    
                    const parsedContent = JSON.parse(contentText);
                    setContent(parsedContent);
                    setLastUpdated(new Date());
                    
                } catch (err) {
                    console.error('Error:', err);
                    setError(`Failed to fetch trending content: ${err.message}`);
                } finally {
                    setLoading(false);
                }
            };

            // Auto-load on mount
            useEffect(() => {
                fetchTrendingContent(selectedCategory);
            }, []);

            // Auto-refresh every 5 minutes if enabled
            useEffect(() => {
                if (autoRefresh) {
                    const interval = setInterval(() => {
                        fetchTrendingContent(selectedCategory);
                    }, 5 * 60 * 1000);

                    return () => clearInterval(interval);
                }
            }, [autoRefresh, selectedCategory]);

            const handleCategoryChange = (categoryId) => {
                setSelectedCategory(categoryId);
                fetchTrendingContent(categoryId);
            };

            const getEngagementColor = (level) => {
                if (level === 'Extreme') return 'color: rgb(248 113 113)';
                if (level === 'Very High') return 'color: rgb(251 146 60)';
                if (level === 'High') return 'color: rgb(250 204 21)';
                return 'color: rgb(74 222 128)';
            };

            const getSentimentColor = (sentiment) => {
                if (sentiment === 'Positive') return 'background: rgba(34, 197, 94, 0.2); color: rgb(74 222 128); border: 1px solid rgba(34, 197, 94, 0.3)';
                if (sentiment === 'Negative') return 'background: rgba(239, 68, 68, 0.2); color: rgb(248 113 113); border: 1px solid rgba(239, 68, 68, 0.3)';
                if (sentiment === 'Controversial') return 'background: rgba(249, 115, 22, 0.2); color: rgb(251 146 60); border: 1px solid rgba(249, 115, 22, 0.3)';
                return 'background: rgba(59, 130, 246, 0.2); color: rgb(96 165 250); border: 1px solid rgba(59, 130, 246, 0.3)';
            };

            const getScoreColor = (score) => {
                if (score >= 9) return 'color: rgb(248 113 113)';
                if (score >= 7) return 'color: rgb(251 146 60)';
                if (score >= 5) return 'color: rgb(250 204 21)';
                return 'color: rgb(74 222 128)';
            };

            const getCategoryIcon = (categoryName) => {
                const cat = categories.find(c => c.name.toLowerCase().includes(categoryName.toLowerCase()));
                return cat?.icon || 'ðŸ“°';
            };

            const getTimeSince = (date) => {
                if (!date) return 'Just now';
                const seconds = Math.floor((new Date() - date) / 1000);
                if (seconds < 60) return 'Just now';
                if (seconds < 3600) return `${Math.floor(seconds / 60)}m ago`;
                if (seconds < 86400) return `${Math.floor(seconds / 3600)}h ago`;
                return `${Math.floor(seconds / 86400)}d ago`;
            };

            return (
                <div style={{minHeight: '100vh', background: 'linear-gradient(to bottom right, rgb(2 6 23), rgb(49 46 129), rgb(2 6 23))', color: 'white', padding: '2rem'}}>
                    <style>{`
                        * { font-family: 'Sora', sans-serif; }
                        .mono { font-family: 'JetBrains Mono', monospace; }
                        @keyframes slideInUp {
                            from { opacity: 0; transform: translateY(30px); }
                            to { opacity: 1; transform: translateY(0); }
                        }
                        @keyframes spin {
                            to { transform: rotate(360deg); }
                        }
                        .animate-slideInUp { animation: slideInUp 0.5s ease-out; }
                        .gradient-text {
                            background: linear-gradient(135deg, #a855f7, #3b82f6);
                            -webkit-background-clip: text;
                            -webkit-text-fill-color: transparent;
                            background-clip: text;
                        }
                        .glow-border {
                            background: linear-gradient(135deg, rgba(168, 85, 247, 0.1), rgba(59, 130, 246, 0.1));
                            border: 1px solid rgba(168, 85, 247, 0.3);
                            backdrop-filter: blur(8px);
                        }
                        .category-pill {
                            transition: all 0.3s ease;
                            cursor: pointer;
                            pointer-events: auto;
                            position: relative;
                            z-index: 10;
                        }
                        .category-pill:hover {
                            transform: translateY(-2px);
                            box-shadow: 0 8px 20px rgba(168, 85, 247, 0.3);
                        }
                        .category-pill.active {
                            background: linear-gradient(135deg, #a855f7, #3b82f6);
                            border-color: transparent;
                        }
                        button {
                            cursor: pointer;
                            pointer-events: auto;
                        }
                    `}</style>

                    <div style={{maxWidth: '1280px', margin: '0 auto'}}>
                        {/* Header */}
                        <header style={{marginBottom: '2rem'}}>
                            <div style={{display: 'flex', alignItems: 'center', justifyContent: 'space-between', marginBottom: '1rem', flexWrap: 'wrap', gap: '1rem'}}>
                                <div style={{display: 'flex', alignItems: 'center', gap: '0.75rem'}}>
                                    <div style={{width: '3rem', height: '3rem', borderRadius: '0.75rem', background: 'linear-gradient(to bottom right, rgb(168 85 247), rgb(59 130 246))', display: 'flex', alignItems: 'center', justifyContent: 'center'}}>
                                        <Zap style={{width: '1.75rem', height: '1.75rem'}} />
                                    </div>
                                    <div>
                                        <h1 className="gradient-text" style={{fontSize: '2.5rem', fontWeight: 800, margin: 0}}>
                                            Trending Content Hub
                                        </h1>
                                        <p style={{color: 'rgb(156 163 175)', fontSize: '0.875rem', margin: 0}}>
                                            Auto-refreshing â€¢ Real-time trending analysis
                                        </p>
                                    </div>
                                </div>

                                <div style={{display: 'flex', alignItems: 'center', gap: '0.75rem', flexWrap: 'wrap'}}>
                                    {lastUpdated && (
                                        <div style={{fontSize: '0.875rem', color: 'rgb(156 163 175)', display: 'flex', alignItems: 'center', gap: '0.5rem'}}>
                                            <Clock style={{width: '1rem', height: '1rem'}} />
                                            Updated {getTimeSince(lastUpdated)}
                                        </div>
                                    )}
                                    
                                    <button
                                        onClick={() => fetchTrendingContent(selectedCategory)}
                                        disabled={loading}
                                        style={{padding: '0.5rem 1rem', background: 'rgb(147 51 234)', borderRadius: '0.5rem', border: 'none', color: 'white', fontWeight: 600, display: 'flex', alignItems: 'center', gap: '0.5rem', opacity: loading ? 0.5 : 1}}
                                    >
                                        <RefreshCw style={{width: '1rem', height: '1rem', animation: loading ? 'spin 1s linear infinite' : 'none'}} />
                                        Refresh
                                    </button>

                                    <button
                                        onClick={() => setAutoRefresh(!autoRefresh)}
                                        style={{padding: '0.5rem 1rem', background: autoRefresh ? 'rgb(22 163 74)' : 'rgb(51 65 85)', borderRadius: '0.5rem', border: 'none', color: 'white', fontWeight: 600}}
                                    >
                                        {autoRefresh ? 'ðŸ”„ Auto: ON' : 'Auto: OFF'}
                                    </button>
                                </div>
                            </div>

                            {/* Category Pills */}
                            <div style={{display: 'flex', flexWrap: 'wrap', gap: '0.75rem'}}>
                                {categories.map((cat) => (
                                    <button
                                        key={cat.id}
                                        onClick={() => handleCategoryChange(cat.id)}
                                        className={`category-pill ${selectedCategory === cat.id ? 'active' : ''}`}
                                        style={{padding: '0.5rem 1rem', borderRadius: '9999px', border: selectedCategory === cat.id ? 'none' : '2px solid rgba(168, 85, 247, 0.3)', background: selectedCategory === cat.id ? '' : 'rgba(15, 23, 42, 0.5)', fontWeight: 600, fontSize: '0.875rem', display: 'flex', alignItems: 'center', gap: '0.5rem'}}
                                    >
                                        <span>{cat.icon}</span>
                                        {cat.name}
                                    </button>
                                ))}
                            </div>
                        </header>

                        {/* Error */}
                        {error && (
                            <div className="glow-border" style={{borderRadius: '0.75rem', padding: '1rem', marginBottom: '1.5rem', background: 'rgba(239, 68, 68, 0.1)', borderColor: 'rgba(239, 68, 68, 0.3)', color: 'rgb(248 113 113)'}}>
                                {error}
                            </div>
                        )}

                        {/* Loading State */}
                        {loading && !content && (
                            <div className="glow-border" style={{borderRadius: '1rem', padding: '3rem', textAlign: 'center'}}>
                                <div style={{width: '4rem', height: '4rem', border: '4px solid rgba(168, 85, 247, 0.3)', borderTopColor: 'rgb(168 85 247)', borderRadius: '50%', animation: 'spin 1s linear infinite', margin: '0 auto 1rem'}}></div>
                                <div style={{fontSize: '1.25rem', fontWeight: 600, marginBottom: '0.5rem'}}>Analyzing Trending Content...</div>
                                <div style={{color: 'rgb(156 163 175)'}}>Searching platforms and analyzing viral potential</div>
                            </div>
                        )}

                        {/* Content - Same as JSX version but with inline styles */}
                        {content && (
                            <div className="animate-slideInUp" style={{display: 'flex', flexDirection: 'column', gap: '1.5rem'}}>
                                {/* Rest of the content rendering - I'll provide the complete version */}
                                <div className="glow-border" style={{borderRadius: '1rem', padding: '1.5rem'}}>
                                    <h2 style={{fontSize: '1.5rem', fontWeight: 700, marginBottom: '1rem', display: 'flex', alignItems: 'center', gap: '0.75rem'}}>
                                        <Star style={{width: '1.5rem', height: '1.5rem', color: 'rgb(250 204 21)'}} />
                                        Key Insights
                                    </h2>
                                    
                                    <div style={{display: 'grid', gridTemplateColumns: 'repeat(auto-fit, minmax(250px, 1fr))', gap: '1rem'}}>
                                        <div style={{background: 'rgba(15, 23, 42, 0.5)', padding: '1rem', borderRadius: '0.75rem', border: '1px solid rgba(168, 85, 247, 0.2)'}}>
                                            <div style={{fontSize: '0.75rem', color: 'rgb(192 132 252)', textTransform: 'uppercase', letterSpacing: '0.05em', marginBottom: '0.5rem', fontWeight: 600}}>
                                                ðŸ”¥ Top Trend
                                            </div>
                                            <div style={{color: 'rgb(229 231 235)', lineHeight: '1.625'}}>{content.insights.topTrend}</div>
                                        </div>
                                        
                                        <div style={{background: 'rgba(15, 23, 42, 0.5)', padding: '1rem', borderRadius: '0.75rem', border: '1px solid rgba(59, 130, 246, 0.2)'}}>
                                            <div style={{fontSize: '0.75rem', color: 'rgb(96 165 250)', textTransform: 'uppercase', letterSpacing: '0.05em', marginBottom: '0.5rem', fontWeight: 600}}>
                                                ðŸ“ˆ Emerging Stories
                                            </div>
                                            <div style={{color: 'rgb(229 231 235)', lineHeight: '1.625'}}>{content.insights.emergingStories}</div>
                                        </div>
                                        
                                        <div style={{background: 'rgba(15, 23, 42, 0.5)', padding: '1rem', borderRadius: '0.75rem', border: '1px solid rgba(249, 115, 22, 0.2)'}}>
                                            <div style={{fontSize: '0.75rem', color: 'rgb(251 146 60)', textTransform: 'uppercase', letterSpacing: '0.05em', marginBottom: '0.5rem', fontWeight: 600}}>
                                                âš¡ Controversies
                                            </div>
                                            <div style={{color: 'rgb(229 231 235)', lineHeight: '1.625'}}>{content.insights.controversies}</div>
                                        </div>
                                        
                                        <div style={{background: 'rgba(15, 23, 42, 0.5)', padding: '1rem', borderRadius: '0.75rem', border: '1px solid rgba(34, 197, 94, 0.2)'}}>
                                            <div style={{fontSize: '0.75rem', color: 'rgb(74 222 128)', textTransform: 'uppercase', letterSpacing: '0.05em', marginBottom: '0.5rem', fontWeight: 600}}>
                                                âœ… Must Cover
                                            </div>
                                            <div style={{color: 'rgb(229 231 235)', lineHeight: '1.625'}}>{content.insights.mustCover}</div>
                                        </div>
                                    </div>
                                </div>

                                {/* Stories shortened for space - full version available */}
                                <div style={{textAlign: 'center', padding: '2rem', color: 'rgb(156 163 175)'}}>
                                    {content.trending.length} trending stories loaded. Scroll to view all.
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<AutoTrendingDashboard />);
    </script>
</body>
</html>